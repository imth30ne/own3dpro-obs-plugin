#!/bin/bash

# create base folder structure
mkdir -p obs-own3d-pro/DEBIAN
mkdir -p obs-own3d-pro/usr/lib/obs-plugins
mkdir -p obs-own3d-pro/usr/share/obs/obs-plugins/own3d/locale

# Create debian definition
# if you have any questions, reach out the debian maintainer of this package.
touch obs-own3d-pro/DEBIAN/changelog
cat > obs-own3d-pro/DEBIAN/control << EOF
Section: custom
Priority: optional
Maintainer: René Preuß from StreamTV Media GmbH <rene.p@stream.tv>
Vcs-Git: https://github.com/own3d/own3dpro-obs-plugin.git
Homepage: https://www.own3d.pro/
Package: obs-own3d-pro
Architecture: all
Version: 1.5.1
Depends: obs-studio (>= 27.0.0)
Essential: no
Installed-Size: 1024
Description: OWN3D Pro Plugin for OBS Studio
EOF
touch obs-own3d-pro/DEBIAN/rules

# Copy binaries and locales
cp -a build/distrib/plugins/own3d/bin/64bit/. obs-own3d-pro/usr/lib/obs-plugins/
cp -a build/distrib/plugins/own3d/data//locale/. obs-own3d-pro/usr/share/obs/obs-plugins/own3d/locale/

# package file
dpkg-deb --build obs-own3d-pro
mv obs-own3d-pro.deb build/package/obs-own3d-pro.deb
